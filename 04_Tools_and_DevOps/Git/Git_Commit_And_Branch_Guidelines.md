# Git 提交与分支准则 (Git Commit & Branch Guidelines)

**标签:** #Git #DevOps #Workflow

## 1. What (这是什么准则？)

**核心准则：** 确保每一次 `git commit` 的内容都具备清晰的自我描述性，让任何协作者（包括未来的自己）都能快速理解本次提交的 **目的** 和 **内容**，从而构建一个可追溯、可读性强的项目迭代历史。

## 2. Why (为什么这很重要？)

遵循这一准则能够解决以下痛点：

* **[避免] 混乱的提交历史:** 防止出现 `update`, `fix bug`, `temp` 等毫无意义的提交信息，让历史记录变得杂乱无章。
* **[方便] Code Review:** 让审查者在查看代码变更前，就能通过提交信息了解代码变更的背景和意图，极大提高审查效率。
* **[加速] 问题定位 (Debugging):** 当出现 Bug 时，可以通过清晰的提交历史（例如 `git bisect`）快速定位到引入问题的代码提交，并评估其影响范围。
* **[简化] 信息陈述:** 提供一套标准的模板，让开发者在提交时不需费力思考如何撰写介绍，只需按规则填充即可，降低心智负担。

## 3. How (我们应该如何做？)

一个业界广泛采用的最佳实践是 **“Conventional Commits” (约定式提交)** 规范。它将提交信息结构化，使其可以被机器和人轻松阅读。

**格式:**
```
<type>[optional scope]: <description>

[optional body]

[optional footer]
```

**核心要素解释:**

| 要素            | 解释                                                                                                                                                                                                                                   | 示例                                                             |
| :-------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :--------------------------------------------------------------- |
| **type**        | 提交类型，必须是以下之一：<br> - `feat`: 新功能<br> - `fix`: Bug 修复<br> - `docs`: 文档变更<br> - `style`: 代码风格（不影响代码运行）<br> - `refactor`: 代码重构<br> - `test`: 增加或修改测试<br> - `chore`: 构建过程或辅助工具的变动 | `feat`                                                           |
| **scope**       | (可选) 本次提交影响的范围                                                                                                                                                                                                              | `(Login)`                                                        |
| **description** | 简短、清晰的描述                                                                                                                                                                                                                       | `新增用户邮箱登录功能`                                           |
| **body**        | (可选) 更详细的描述，可换行。用于解释变更的背景、实现方式等。                                                                                                                                                                  | `用户现在可以使用注册邮箱和密码进行登录，替代原有的用户名登录。` |
| **footer**      | (可选) 用于记录不兼容性变更 (BREAKING CHANGE) 或关闭的 Issue (例如 Closes #123)。                                                                                                                                                                           | `BREAKING CHANGE: /api/v1/login 接口废弃`                        |

**一个完整的例子：**
```bash
git commit -m "feat(Login): 新增用户邮箱登录功能

用户现在可以使用注册邮箱和密码进行登录，替代原有的用户名登录。
这为后续实现 SSO 单点登录奠定了基础。

Closes #123"
```

## 4. When (何时应用？)
* **团队协作时:** 强制执行，是保障团队开发效率的基石。
* **个人项目:** 强烈推荐，是优秀工程师的职业素养体现。

## 5. SDET 视角：这份准则的价值

- **精准划定测试范围:** 通过 `feat`, `fix`, `refactor` 等类型，精确判断自动化测试的重点。
- **驱动自动化测试:** 可在 CI/CD 中根据 `type` 自动触发不同级别的测试任务。
- **优化测试报告:** 自动将 `commit` 信息关联到 Bug 报告，加速问题定位。
- **自动化生成版本说明:** 让测试团队清晰地了解版本变更，制定测试策略。